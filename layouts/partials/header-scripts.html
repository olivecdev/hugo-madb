{{ if .Site.Params.enableThemeToggle }}
{{ with resources.Get "css/dark.css" | resources.Minify | resources.Fingerprint }}
<link rel="stylesheet" href="{{ .RelPermalink }}">
{{ end }}

<script>
  const darkClass = "bx bx-moon bx-xs";
  const lightClass = "bx bx-sun bx-xs";

  var toggle = document.getElementById("dark-mode-toggle");
  // the default theme is light
  var savedTheme = localStorage.getItem("theme") || "light";
  setTheme(savedTheme);

  function setTheme(mode) {
    localStorage.setItem("theme", mode);
    document.documentElement.setAttribute("data-theme", mode);

    if (mode === "dark") {
      toggle.className = lightClass;
    } else {
      toggle.className = darkClass;
    }
  }

  function toggleTheme() {
    var currentTheme = localStorage.getItem("theme") || "light";
    if (currentTheme === "light") {
      setTheme("dark");
    } else {
      setTheme("light");
    }
  }

  // Apply theme on page load
  document.addEventListener("DOMContentLoaded", function () {
    setTheme(localStorage.getItem("theme") || "light");
  });
</script>
{{ end }}